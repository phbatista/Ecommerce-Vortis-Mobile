<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho - Vortis Mobile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="/js/carrinho/carrinho.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div id="navbar-placeholder"></div>

<div class="container mt-5">
    <h2 class="mb-4">Carrinho de Compras</h2>

    <div class="table-responsive mb-4">
        <table class="table table-bordered align-middle text-center">
            <thead class="table-dark">
            <tr>
                <th>Produto</th>
                <th>Preço Unitário</th>
                <th>Quantidade</th>
                <th>Total</th>
                <th>Ações</th>
            </tr>
            </thead>
            <tbody>
            <!-- Produtos serão inseridos dinamicamente via JS -->
            </tbody>
        </table>
    </div>

    <div class="mb-3" style="max-width: 400px;">
        <label for="enderecoEntrega" class="form-label">Endereço de Entrega</label>
        <select class="form-select" id="enderecoEntrega" required>
            <option value="">Selecione um endereço</option>
        </select>
    </div>

    <button class="btn btn-sm btn-outline-secondary mb-3" onclick="mostrarFormularioEndereco()">+ Novo Endereço</button>

    <div id="formNovoEndereco" style="display: none; max-width: 600px;" class="border rounded p-3 mb-3">
        <h5 class="mb-3">Novo Endereço de Entrega</h5>

        <div class="row">
            <div class="col-md-4 mb-2">
                <label>Tipo de Residência</label>
                <select id="tipo_residencia_entrega" class="form-control">
                    <option value="">Selecione</option>
                    <option value="Casa">Casa</option>
                    <option value="Apartamento">Apartamento</option>
                    <option value="Loja">Loja</option>
                </select>
            </div>
            <div class="col-md-4 mb-2">
                <label>Tipo de Logradouro</label>
                <select id="tipo_logradouro_entrega" class="form-control">
                    <option value="">Selecione</option>
                    <option value="Rua">Rua</option>
                    <option value="Avenida">Avenida</option>
                    <option value="Travessa">Travessa</option>
                </select>
            </div>
            <div class="col-md-4 mb-2">
                <label>Logradouro</label>
                <input id="nome_logradouro_entrega" class="form-control" />
            </div>

            <div class="col-md-2 mb-2">
                <label>Número</label>
                <input id="numero_entrega" class="form-control" />
            </div>
            <div class="col-md-3 mb-2">
                <label>CEP</label>
                <input id="cep_entrega" class="form-control" />
            </div>
            <div class="col-md-3 mb-2">
                <label>Bairro</label>
                <input id="bairro_entrega" class="form-control" />
            </div>
            <div class="col-md-2 mb-2">
                <label>Cidade</label>
                <input id="cidade_entrega" class="form-control" />
            </div>
            <div class="col-md-1 mb-2">
                <label>UF</label>
                <input id="estado_entrega" class="form-control" />
            </div>
            <div class="col-md-1 mb-2">
                <label>País</label>
                <input id="pais_entrega" class="form-control" />
            </div>
        </div>

        <button class="btn btn-success btn-sm mt-2" onclick="salvarNovoEndereco()">Salvar Endereço</button>
        <button class="btn btn-outline-secondary btn-sm mt-2" onclick="fecharFormularioEndereco()">Cancelar</button>
    </div>

    <button id="btnCalcularFrete" class="btn btn-outline-primary mb-3">
        Calcular Frete
    </button>

    <div id="freteInfo" class="mb-3 fw-bold"></div>


    <div class="mb-4">
        <h4>Resumo do Pedido</h4>
        <ul class="list-group" style="max-width: 400px;">
            <li class="list-group-item d-flex justify-content-between">
                Frete <span id="valorFreteResumo">R$ 0,00</span>
            </li>
            <li class="list-group-item d-flex justify-content-between fw-bold">
                Total <span id="totalCarrinho">R$ 0,00</span>
            </li>
        </ul>
    </div>

    <div class="d-flex justify-content-between">
        <a href="/catalogo" class="btn btn-secondary">Continuar Comprando</a>
        <button id="btnFinalizarPedido" class="btn btn-success">Finalizar Pedido</button>
    </div>
</div>

<script src="/js/carrinho/carrinho.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    fetch('../navbar/navbar.html')
        .then(res => res.text())
        .then(data => {
            document.getElementById('navbar-placeholder').innerHTML = data;
        });
</script>
</body>
</html>